const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Trainer-BvGzqtl-.js","assets/utils-Dhpz6cMF.js","assets/index-DOampWFA.js","assets/index-7U3v9ggH.css","assets/GameFrame-CzJCdGM3.js","assets/Math-DRVBjLM2.js","assets/Math-DS4iGSO1.css","assets/GameFrame-eDjxREz8.css","assets/Trainer-Bj1fc_FN.js"])))=>i.map(i=>d[i]);
import{w as R,d as h,_ as C,p as N}from"./index-DOampWFA.js";import{S as O,b as V,s as Q,d as P,x as G,k as T,m as b,o as M,p as x,j as p,e as L,f,z as E,g as w,y as A,h as H,u as B,q as J,D as K,n as z,c as q,t as y,w as I,A as U}from"./utils-Dhpz6cMF.js";import{S as X}from"./SubNav-BxlBZnhM.js";const d=R({level:1,totalLevels:10,correctAnswers:0,currentQuestion:"",fontSize:64,isLandscape:!1,screenSize:"desktop",responsiveSizing:{mobile:{baseFontSize:32,maxFontSize:64,minFontSize:18,scalingFactor:1.2},tablet:{baseFontSize:48,maxFontSize:96,minFontSize:24,scalingFactor:1.1},desktop:{baseFontSize:64,maxFontSize:120,minFontSize:32,scalingFactor:1}},currentGame:null,score:0,lives:3,timeLeft:60,isPlaying:!1,isPaused:!1});h(d,e=>e.fontSize);h(d,e=>e.isPlaying&&!e.isPaused);h(d,e=>({level:e.level,score:e.score,timeLeft:e.timeLeft,lives:e.lives}));const Y={setLevel:e=>{d.update(t=>({...t,level:e}))},setFontSize:e=>{d.update(t=>({...t,fontSize:e}))},setScreenSize:e=>{d.update(t=>({...t,screenSize:e}))},setLandscape:e=>{d.update(t=>({...t,isLandscape:e}))},setGameType:e=>{d.update(t=>({...t,currentGame:e}))},startGame:()=>{d.update(e=>({...e,isPlaying:!0,isPaused:!1,score:0,timeLeft:60,lives:3}))},pauseGame:()=>{d.update(e=>({...e,isPaused:!0}))},resumeGame:()=>{d.update(e=>({...e,isPaused:!1}))},endGame:()=>{d.update(e=>({...e,isPlaying:!1,isPaused:!1}))},updateScore:e=>{d.update(t=>({...t,score:t.score+e}))},loseLife:()=>{d.update(e=>({...e,lives:Math.max(0,e.lives-1),isPlaying:e.lives>1}))},resetGame:()=>{d.update(e=>({...e,level:1,score:0,lives:3,timeLeft:60,isPlaying:!1,isPaused:!1,currentGame:null}))}},g=R({screenSize:"desktop",isLandscape:!1,windowWidth:1024,windowHeight:768,devicePixelRatio:1});h(g,e=>e.screenSize);h(g,e=>e.screenSize==="mobile");h(g,e=>e.screenSize==="tablet");h(g,e=>e.screenSize==="desktop");h(g,e=>e.isLandscape);const j={updateScreenSize:e=>{let t="mobile";e>=1024?t="desktop":e>=768&&(t="tablet"),g.update(n=>({...n,screenSize:t,windowWidth:e}))},updateDimensions:(e,t)=>{const n=e>t;g.update(s=>({...s,windowWidth:e,windowHeight:t,isLandscape:n}))},updateDevicePixelRatio:e=>{g.update(t=>({...t,devicePixelRatio:e}))},initResponsive:()=>{if(typeof window>"u")return;const e=()=>{j.updateDimensions(window.innerWidth,window.innerHeight),j.updateScreenSize(window.innerWidth)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)}),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}},k=R({currentTheme:"auto",systemTheme:"light",isDark:!1});h(k,e=>e.currentTheme);h(k,e=>e.isDark);h(k,e=>e.currentTheme==="auto"?e.systemTheme:e.currentTheme);const S={setTheme:e=>{k.update(t=>{const n={...t,currentTheme:e};return n.isDark=e==="dark"||e==="auto"&&t.systemTheme==="dark",n}),Z(),$(e)},setSystemTheme:e=>{k.update(t=>({...t,systemTheme:e,isDark:t.currentTheme==="dark"||t.currentTheme==="auto"&&e==="dark"}))},initTheme:()=>{if(typeof window>"u")return;const e=localStorage.getItem("mathraining-theme");if(e)S.setTheme(e);else{const t=window.matchMedia("(prefers-color-scheme: dark)").matches;S.setSystemTheme(t?"dark":"light")}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{S.setSystemTheme(t.matches?"dark":"light")})},toggleTheme:()=>{k.update(e=>{const t=e.isDark?"light":"dark";return S.setTheme(t),e})}};function Z(){typeof document>"u"||k.subscribe(e=>{const t=e.currentTheme==="dark"||e.currentTheme==="auto"&&e.systemTheme==="dark";document.documentElement.classList.toggle("dark",t),document.documentElement.setAttribute("data-theme",t?"dark":"light")})}function $(e){typeof localStorage<"u"&&localStorage.setItem("mathraining-theme",e)}function ee(e){let t,n,s,o;return{c(){t=w("div"),n=y("Loading "),s=y(e[2]),o=y(" game..."),p(t,"class","loading svelte-1rki9nj")},m(r,i){L(r,t,i),f(t,n),f(t,s),f(t,o)},p(r,i){i&4&&q(s,r[2])},i:z,o:z,d(r){r&&P(t)}}}function te(e){let t,n,s;var o=e[1];function r(i,a){return{}}return o&&(t=I(o,r()),t.$on("answer",e[4])),{c(){t&&A(t.$$.fragment),n=U()},m(i,a){t&&E(t,i,a),L(i,n,a),s=!0},p(i,a){if(a&2&&o!==(o=i[1])){if(t){M();const c=t;T(c.$$.fragment,1,0,()=>{G(c,1)}),x()}o?(t=I(o,r()),t.$on("answer",i[4]),A(t.$$.fragment),b(t.$$.fragment,1),E(t,n.parentNode,n)):t=null}},i(i){s||(t&&b(t.$$.fragment,i),s=!0)},o(i){t&&T(t.$$.fragment,i),s=!1},d(i){i&&P(n),t&&G(t,i)}}}function ne(e){let t,n,s=e[2]==="arithmetic"?"Arithmetic":"Calculus",o,r,i,a;return{c(){t=w("div"),n=w("h2"),o=y(s),r=y(" Learning"),i=H(),a=w("p"),a.textContent="Review key concepts and improve your skills.",p(n,"class","svelte-1rki9nj"),p(a,"class","svelte-1rki9nj"),p(t,"class","learning-box svelte-1rki9nj")},m(c,m){L(c,t,m),f(t,n),f(n,o),f(n,r),f(t,i),f(t,a)},p(c,m){m&4&&s!==(s=c[2]==="arithmetic"?"Arithmetic":"Calculus")&&q(o,s)},i:z,o:z,d(c){c&&P(t)}}}function ie(e){let t,n,s,o,r,i,a,c,m;s=new X({props:{currentPath:e[0],gameType:e[2]}});const u=[ne,te,ee],v=[];function W(l,_){return l[3]?0:l[1]?1:2}return i=W(e),a=v[i]=u[i](e),{c(){t=w("section"),n=w("div"),A(s.$$.fragment),o=H(),r=w("div"),a.c(),p(r,"class","game-content svelte-1rki9nj"),p(r,"role","region"),p(r,"aria-live","polite"),p(n,"class","game-section svelte-1rki9nj"),p(t,"class","game-host svelte-1rki9nj"),p(t,"aria-label",c=e[2]+" Game")},m(l,_){L(l,t,_),f(t,n),E(s,n,null),f(n,o),f(n,r),v[i].m(r,null),m=!0},p(l,[_]){const D={};_&1&&(D.currentPath=l[0]),_&4&&(D.gameType=l[2]),s.$set(D);let F=i;i=W(l),i===F?v[i].p(l,_):(M(),T(v[F],1,1,()=>{v[F]=null}),x(),a=v[i],a?a.p(l,_):(a=v[i]=u[i](l),a.c()),b(a,1),a.m(r,null)),(!m||_&4&&c!==(c=l[2]+" Game"))&&p(t,"aria-label",c)},i(l){m||(b(s.$$.fragment,l),b(a),m=!0)},o(l){T(s.$$.fragment,l),T(a),m=!1},d(l){l&&P(t),G(s),v[i].d()}}}function se(e,t,n){let s,o,r;B(e,N,u=>n(5,r=u));const i=J();let{currentPath:a="/"}=t,c=null;function m(u){i("answer",u.detail)}return K(()=>{j.initResponsive(),S.initTheme(),Y.setGameType(s)}),e.$$set=u=>{"currentPath"in u&&n(0,a=u.currentPath)},e.$$.update=()=>{e.$$.dirty&32&&n(0,a=r),e.$$.dirty&1&&n(2,s=a.startsWith("/arithmetic")?"arithmetic":"calculus"),e.$$.dirty&1&&n(3,o=a.includes("/learning")),e.$$.dirty&6&&(s==="arithmetic"&&!c?C(()=>import("./Trainer-BvGzqtl-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(u=>{n(1,c=u.default)}).catch(u=>console.error("Failed to load arithmetic trainer:",u)):s==="calculus"&&!c&&C(()=>import("./Trainer-Bj1fc_FN.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])).then(u=>{n(1,c=u.default)}).catch(u=>console.error("Failed to load calculus trainer:",u)))},[a,c,s,o,m,r]}class ce extends O{constructor(t){super(),V(this,t,se,ie,Q,{currentPath:0})}}export{ce as default};
