import{C as pe,S as ce,d as de,e as Z,h as G,t as _,b,a as W,c as Y,l as K,A as he,E as ge,F as xe,G as _e,J as be,K as z,L as J,x as S,M as Q,z as A,y as q,p as $,k as ee,v as te}from"./index-DLn-mdrQ.js";import{G as Me}from"./GameFrame-Bq2yWsVP.js";import P from"./Math-CqWuv0qz.js";import"./SubNav-s1jv8jbS.js";/* empty css                                           */const ke=[{id:1,ops:["+","-"],min:1,max:9,total:12,desc:"Single-digit addition and subtraction"},{id:2,ops:["+","-","x"],min:1,max:9,total:12,desc:"Intro to multiplication with friendly tables",multiples:[2,5,10]},{id:3,ops:["+","-","x","/"],min:1,max:9,total:14,desc:"Introduce exact division (kept within range)",multiples:[3,4]},{id:4,ops:["+","-"],min:1,max:20,total:14,desc:"Add/sub within 1â€“20"},{id:5,ops:["x","/"],min:2,max:12,total:16,desc:"Times tables up to 12 (and their divisions)",multiples:[2,3,4,5,10]},{id:6,ops:["+","-","x","/"],min:1,max:30,total:18,desc:"Mixed up to 30",multiples:[2,5,10]},{id:7,ops:["+","-","x","/"],min:1,max:50,total:18,desc:"Mixed up to 50",multiples:[4,6,8]},{id:8,ops:["+","-","x","/"],min:1,max:80,total:20,desc:"Trickier multiples practice",multiples:[7,8,9]},{id:9,ops:["+","-","x","/"],min:1,max:90,total:20,desc:"Patterns and accuracy",multiples:[3,6,9]},{id:10,ops:["+","-","x","/"],min:1,max:99,total:22,desc:"Full two-digit practice (up to 99)"},{id:11,ops:["+","-"],min:10,max:199,total:18,desc:"Hundreds addition and subtraction"},{id:12,ops:["+","-","x"],min:1,max:199,total:20,desc:"Products with two/three digits",multiples:[5,10,25]},{id:13,ops:["+","-","x","/"],min:1,max:249,total:20,desc:"Mixed practice up to 250"},{id:14,ops:["+","-","x","/"],min:1,max:399,total:22,desc:"Mixed up to 399",multiples:[4,8,12]},{id:15,ops:["+","-","x","/"],min:1,max:499,total:22,desc:"Mixed up to 499"},{id:16,ops:["+","-","x","/"],min:1,max:699,total:24,desc:"Trickier factors",multiples:[7,11,13]},{id:17,ops:["+","-","x","/"],min:1,max:799,total:24,desc:"Heavier practice",multiples:[9,12,16]},{id:18,ops:["+","-","x","/"],min:1,max:899,total:24,desc:"Approaching thousands"},{id:19,ops:["+","-","x","/"],min:1,max:950,total:24,desc:"Round-number multiples",multiples:[20,25,50]},{id:20,ops:["+","-","x","/"],min:1,max:999,total:26,desc:"Three-digit mixed challenge (up to 999)"}];function ne(n){return ke.find(r=>r.id===n)}function ye(n){return ne(n+1)}const I=pe(0);let L=null;function we(n){F(),I.set(n),L=window.setInterval(()=>{I.update(r=>r<=1?(F(),0):r-1)},1e3)}function Ee(){F(),I.set(0)}function F(){L&&(clearInterval(L),L=null)}function Te(n){let r,e;return r=new P({props:{expr:"\\text{Get ready...}"}}),{c(){q(r.$$.fragment)},m(a,i){A(r,a,i),e=!0},p:te,i(a){e||(b(r.$$.fragment,a),e=!0)},o(a){_(r.$$.fragment,a),e=!1},d(a){S(r,a)}}}function Le(n){let r,e;return r=new P({props:{expr:`\\text{Time left: } ${n[1].toFixed(1)}\\text{s}`}}),{c(){q(r.$$.fragment)},m(a,i){A(r,a,i),e=!0},p(a,i){const u={};i&2&&(u.expr=`\\text{Time left: } ${a[1].toFixed(1)}\\text{s}`),r.$set(u)},i(a){e||(b(r.$$.fragment,a),e=!0)},o(a){_(r.$$.fragment,a),e=!1},d(a){S(r,a)}}}function Ce(n){let r,e,a,i;const u=[Le,Te],t=[];function d(o,s){return o[0]?1:0}return e=d(n),a=t[e]=u[e](n),{c(){r=$("span"),a.c(),ee(r,"slot","footer-left")},m(o,s){K(o,r,s),t[e].m(r,null),i=!0},p(o,s){let m=e;e=d(o),e===m?t[e].p(o,s):(W(),_(t[m],1,1,()=>{t[m]=null}),Y(),a=t[e],a?a.p(o,s):(a=t[e]=u[e](o),a.c()),b(a,1),a.m(r,null))},i(o){i||(b(a),i=!0)},o(o){_(a),i=!1},d(o){o&&G(r),t[e].d()}}}function Ie(n){let r,e,a;return e=new P({props:{expr:`\\text{Range: } ${n[2].min}\\text{--}${n[2].max}\\quad \\text{Ops: } ${n[2].ops.join("\\,")}`}}),{c(){r=$("span"),q(e.$$.fragment),ee(r,"slot","footer-right")},m(i,u){K(i,r,u),A(e,r,null),a=!0},p(i,u){const t={};u&4&&(t.expr=`\\text{Range: } ${i[2].min}\\text{--}${i[2].max}\\quad \\text{Ops: } ${i[2].ops.join("\\,")}`),e.$set(t)},i(i){a||(b(e.$$.fragment,i),a=!0)},o(i){_(e.$$.fragment,i),a=!1},d(i){i&&G(r),S(e)}}}function X(n){let r,e,a,i;function u(o){n[16](o)}function t(o){n[17](o)}let d={title:"MathRaining",levelId:n[2].id,total:n[2].total,correct:n[11],question:n[3].question,flash:n[6],penalty:n[7],overlayLabel:n[8],overlayColor:n[9],overlayTrigger:n[10],handleInput:n[12],handleInputKey:n[13],$$slots:{"footer-right":[Ie],"footer-left":[Ce]},$$scope:{ctx:n}};return n[5]!==void 0&&(d.inputEl=n[5]),n[4]!==void 0&&(d.input=n[4]),r=new Me({props:d}),z.push(()=>J(r,"inputEl",u)),z.push(()=>J(r,"input",t)),{c(){q(r.$$.fragment)},m(o,s){A(r,o,s),i=!0},p(o,s){const m={};s&4&&(m.levelId=o[2].id),s&4&&(m.total=o[2].total),s&2048&&(m.correct=o[11]),s&8&&(m.question=o[3].question),s&64&&(m.flash=o[6]),s&128&&(m.penalty=o[7]),s&256&&(m.overlayLabel=o[8]),s&512&&(m.overlayColor=o[9]),s&1024&&(m.overlayTrigger=o[10]),s&67108871&&(m.$$scope={dirty:s,ctx:o}),!e&&s&32&&(e=!0,m.inputEl=o[5],Q(()=>e=!1)),!a&&s&16&&(a=!0,m.input=o[4],Q(()=>a=!1)),r.$set(m)},i(o){i||(b(r.$$.fragment,o),i=!0)},o(o){_(r.$$.fragment,o),i=!1},d(o){S(r,o)}}}function Fe(n){let r=n[3].id,e,a,i=X(n);return{c(){i.c(),e=he()},m(u,t){i.m(u,t),K(u,e,t),a=!0},p(u,[t]){t&8&&Z(r,r=u[3].id)?(W(),_(i,1,1,te),Y(),i=X(u),i.c(),b(i,1),i.m(e.parentNode,e)):i.p(u,t)},i(u){a||(b(i),a=!0)},o(u){_(i),a=!1},d(u){u&&G(e),i.d(u)}}}const Se=8e3;function Ae(n){return n<2e3?{label:"perfect",color:"#4C5B5C"}:n<4e3?{label:"great",color:"#2F52E0"}:n<6e3?{label:"good",color:"#BCED09"}:n<8e3?{label:"bad",color:"#F9CB40"}:{label:"miss",color:"#FF715B"}}function C(n,r){return Math.floor(Math.random()*(r-n+1))+n}function x(n,r,e){if(e<=1)return C(Math.max(1,n),r);const a=Math.max(1,Math.ceil(n/e)),i=Math.floor(r/e);return i<a?C(Math.max(1,n),r):e*C(a,i)}function h(n,r){return C(Math.max(1,n),r)}function qe(n,r,e){let a=Se;return(n==="x"||n==="/")&&(a+=2e3),Math.max(Math.abs(r),Math.abs(e))>=50&&(a+=1500),a}function De(n,r,e){let a,i;ge(n,I,l=>e(1,i=l));const u=xe();let t=ne(1),d,o="",s=null,m=0,w=!1,D=!1,M=!0,E=!1,v=performance.now(),H=0,B="",N="",O=0;function re(){const l=t.ops[Math.floor(Math.random()*t.ops.length)],f=Array.isArray(t.multiples)&&t.multiples.length>0,g=f?t.multiples[Math.floor(Math.random()*t.multiples.length)]:1;let p=t.min,c=t.min;if(l==="+")p=f?x(t.min,t.max,g):h(t.min,t.max),c=f?x(t.min,t.max,g):h(t.min,t.max);else if(l==="-")p=f?x(t.min,t.max,g):h(t.min,t.max),c=f?x(t.min,t.max,g):h(t.min,t.max);else if(l==="x")p=f?x(t.min,t.max,g):h(t.min,t.max),c=f?x(t.min,t.max,g):h(t.min,t.max);else{let fe=0,R=!1,y=1;for(;fe++<20&&!R;){y=f?Math.max(1,x(1,Math.max(1,t.max),g)):Math.max(1,h(1,Math.max(1,t.max)));const j=Math.min(t.max,Math.floor(t.max/y));j<1||(c=f?Math.max(1,x(1,j,g)):h(1,j),p=y*c,p>=1&&p<=t.max&&(R=!0))}R||(c=Math.max(1,h(t.min,t.max)),y=Math.max(1,h(t.min,t.max)),p=y*c)}const T=l==="+"?p+c:l==="-"?p-c:l==="x"?p*c:p/c,ue=`\\displaystyle ${p} \\; ${l==="+"?"+":l==="-"?"-":l==="x"?"\\times":"\\div"} \\; ${c}`,me=qe(l,p,c);return{id:Math.random().toString(36).slice(2)+Date.now().toString(36),a:p,b:c,op:l,answer:T,question:ue,timeMs:me}}function U(){e(3,d=re()),M?Ee():we(d.timeMs/1e3),e(15,E=!1),v=performance.now()}function oe(){e(14,m=0),e(4,o=""),e(6,w=!1),e(0,M=!0),U()}oe();function k(l){let f=l.replace(/[^0-9\-]/g,"");if(f.indexOf("-")>0&&(f=f.replace(/-/g,"")),e(4,o=f),!f)return;if(Number(f)===d.answer){H=performance.now()-v;const p=Ae(H);e(8,B=p.label),e(9,N=p.color),e(10,O+=1),e(6,w=!0),e(14,m+=1),u("answer",{correct:!0});const c=m>=t.total;setTimeout(()=>{if(c){const T=ye(t.id);T&&(e(2,t=T),e(14,m=0),e(0,M=!0))}else e(0,M=!1);e(4,o=""),e(6,w=!1),U()},160)}}function ae(l){k(l.target.value)}function V(l){const f=l.target.tagName;if(["INPUT","TEXTAREA","SELECT"].includes(f))return l.target===s,void 0;if(l.key==="Backspace"){e(4,o=o.slice(0,-1)),k(o),l.preventDefault();return}if((l.key==="-"||l.key===" ")&&o.length===0){e(4,o="-"),k(o),l.preventDefault();return}if(/^[0-9]$/.test(l.key)){e(4,o+=l.key),k(o),l.preventDefault();return}l.key==="Escape"&&(e(4,o=""),l.preventDefault())}function ie(l){if(l.key==="Shift"){l.preventDefault(),e(4,o="");return}l.key==="Control"||l.key==="Alt"||l.key==="Meta"||l.key===" "&&o.length===0&&(l.preventDefault(),e(4,o="-"),k(o))}_e(()=>{window.addEventListener("keydown",V),setTimeout(()=>s==null?void 0:s.focus(),0)}),be(()=>{window.removeEventListener("keydown",V),F()});function le(l){s=l,e(5,s)}function se(l){o=l,e(4,o)}return n.$$.update=()=>{n.$$.dirty&50179&&i<=0&&!E&&!M&&(u("answer",{correct:!1}),e(15,E=!0),e(14,m-=2),e(8,B="miss"),e(9,N="#FF715B"),e(10,O+=1),e(7,D=!0),setTimeout(()=>{e(7,D=!1)},200)),n.$$.dirty&16384&&e(11,a=m<0?0:m)},[M,i,t,d,o,s,w,D,B,N,O,a,ae,ie,m,E,le,se]}class Ke extends ce{constructor(r){super(),de(this,r,De,Fe,Z,{})}}export{Ke as default};
