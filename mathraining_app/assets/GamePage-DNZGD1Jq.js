const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Trainer-BSIbcwzm.js","./index-COWYjszj.js","./index-DugQ9ChK.css","./GameFrame-DZny3Y9H.js","./SubNav-CJcpgVQI.js","./SubNav-DrQTpl8c.css","./Math-Dovijxyd.js","./Math-BYiDkKAG.css","./GameFrame-C6ocMcrG.css","./Trainer-D3wPrIOK.js"])))=>i.map(i=>d[i]);
import{C as R,D as h,S as N,d as O,e as V,h as P,x as G,t as T,b,a as I,c as M,k as p,l as L,m as f,z as E,p as w,y as A,q as x,E as Q,F as B,G as J,_ as W,v as z,j as q,u as y,w as H,A as K,H as U}from"./index-COWYjszj.js";import{S as X}from"./SubNav-CJcpgVQI.js";const d=R({level:1,totalLevels:10,correctAnswers:0,currentQuestion:"",fontSize:64,isLandscape:!1,screenSize:"desktop",responsiveSizing:{mobile:{baseFontSize:32,maxFontSize:64,minFontSize:18,scalingFactor:1.2},tablet:{baseFontSize:48,maxFontSize:96,minFontSize:24,scalingFactor:1.1},desktop:{baseFontSize:64,maxFontSize:120,minFontSize:32,scalingFactor:1}},currentGame:null,score:0,lives:3,timeLeft:60,isPlaying:!1,isPaused:!1});h(d,e=>e.fontSize);h(d,e=>e.isPlaying&&!e.isPaused);h(d,e=>({level:e.level,score:e.score,timeLeft:e.timeLeft,lives:e.lives}));const Y={setLevel:e=>{d.update(t=>({...t,level:e}))},setFontSize:e=>{d.update(t=>({...t,fontSize:e}))},setScreenSize:e=>{d.update(t=>({...t,screenSize:e}))},setLandscape:e=>{d.update(t=>({...t,isLandscape:e}))},setGameType:e=>{d.update(t=>({...t,currentGame:e}))},startGame:()=>{d.update(e=>({...e,isPlaying:!0,isPaused:!1,score:0,timeLeft:60,lives:3}))},pauseGame:()=>{d.update(e=>({...e,isPaused:!0}))},resumeGame:()=>{d.update(e=>({...e,isPaused:!1}))},endGame:()=>{d.update(e=>({...e,isPlaying:!1,isPaused:!1}))},updateScore:e=>{d.update(t=>({...t,score:t.score+e}))},loseLife:()=>{d.update(e=>({...e,lives:Math.max(0,e.lives-1),isPlaying:e.lives>1}))},resetGame:()=>{d.update(e=>({...e,level:1,score:0,lives:3,timeLeft:60,isPlaying:!1,isPaused:!1,currentGame:null}))}},g=R({screenSize:"desktop",isLandscape:!1,windowWidth:1024,windowHeight:768,devicePixelRatio:1});h(g,e=>e.screenSize);h(g,e=>e.screenSize==="mobile");h(g,e=>e.screenSize==="tablet");h(g,e=>e.screenSize==="desktop");h(g,e=>e.isLandscape);const j={updateScreenSize:e=>{let t="mobile";e>=1024?t="desktop":e>=768&&(t="tablet"),g.update(n=>({...n,screenSize:t,windowWidth:e}))},updateDimensions:(e,t)=>{const n=e>t;g.update(a=>({...a,windowWidth:e,windowHeight:t,isLandscape:n}))},updateDevicePixelRatio:e=>{g.update(t=>({...t,devicePixelRatio:e}))},initResponsive:()=>{if(typeof window=="undefined")return;const e=()=>{j.updateDimensions(window.innerWidth,window.innerHeight),j.updateScreenSize(window.innerWidth)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)}),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}},k=R({currentTheme:"auto",systemTheme:"light",isDark:!1});h(k,e=>e.currentTheme);h(k,e=>e.isDark);h(k,e=>e.currentTheme==="auto"?e.systemTheme:e.currentTheme);const S={setTheme:e=>{k.update(t=>{const n={...t,currentTheme:e};return n.isDark=e==="dark"||e==="auto"&&t.systemTheme==="dark",n}),Z(),$(e)},setSystemTheme:e=>{k.update(t=>({...t,systemTheme:e,isDark:t.currentTheme==="dark"||t.currentTheme==="auto"&&e==="dark"}))},initTheme:()=>{if(typeof window=="undefined")return;const e=localStorage.getItem("mathraining-theme");if(e)S.setTheme(e);else{const t=window.matchMedia("(prefers-color-scheme: dark)").matches;S.setSystemTheme(t?"dark":"light")}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{S.setSystemTheme(t.matches?"dark":"light")})},toggleTheme:()=>{k.update(e=>{const t=e.isDark?"light":"dark";return S.setTheme(t),e})}};function Z(){typeof document!="undefined"&&k.subscribe(e=>{const t=e.currentTheme==="dark"||e.currentTheme==="auto"&&e.systemTheme==="dark";document.documentElement.classList.toggle("dark",t),document.documentElement.setAttribute("data-theme",t?"dark":"light")})}function $(e){typeof localStorage!="undefined"&&localStorage.setItem("mathraining-theme",e)}function ee(e){let t,n,a,o;return{c(){t=w("div"),n=y("Loading "),a=y(e[2]),o=y(" game..."),p(t,"class","loading svelte-1rki9nj")},m(r,i){L(r,t,i),f(t,n),f(t,a),f(t,o)},p(r,i){i&4&&q(a,r[2])},i:z,o:z,d(r){r&&P(t)}}}function te(e){let t,n,a;var o=e[1];function r(i,s){return{}}return o&&(t=H(o,r()),t.$on("answer",e[4])),{c(){t&&A(t.$$.fragment),n=K()},m(i,s){t&&E(t,i,s),L(i,n,s),a=!0},p(i,s){if(s&2&&o!==(o=i[1])){if(t){I();const c=t;T(c.$$.fragment,1,0,()=>{G(c,1)}),M()}o?(t=H(o,r()),t.$on("answer",i[4]),A(t.$$.fragment),b(t.$$.fragment,1),E(t,n.parentNode,n)):t=null}},i(i){a||(t&&b(t.$$.fragment,i),a=!0)},o(i){t&&T(t.$$.fragment,i),a=!1},d(i){i&&P(n),t&&G(t,i)}}}function ne(e){let t,n,a=e[2]==="arithmetic"?"Arithmetic":"Calculus",o,r,i,s;return{c(){t=w("div"),n=w("h2"),o=y(a),r=y(" Learning"),i=x(),s=w("p"),s.textContent="Review key concepts and improve your skills.",p(n,"class","svelte-1rki9nj"),p(s,"class","svelte-1rki9nj"),p(t,"class","learning-box svelte-1rki9nj")},m(c,m){L(c,t,m),f(t,n),f(n,o),f(n,r),f(t,i),f(t,s)},p(c,m){m&4&&a!==(a=c[2]==="arithmetic"?"Arithmetic":"Calculus")&&q(o,a)},i:z,o:z,d(c){c&&P(t)}}}function ie(e){let t,n,a,o,r,i,s,c,m;a=new X({props:{currentPath:e[0],gameType:e[2]}});const u=[ne,te,ee],v=[];function C(l,_){return l[3]?0:l[1]?1:2}return i=C(e),s=v[i]=u[i](e),{c(){t=w("section"),n=w("div"),A(a.$$.fragment),o=x(),r=w("div"),s.c(),p(r,"class","game-content svelte-1rki9nj"),p(r,"role","region"),p(r,"aria-live","polite"),p(n,"class","game-section svelte-1rki9nj"),p(t,"class","game-host svelte-1rki9nj"),p(t,"aria-label",c=e[2]+" Game")},m(l,_){L(l,t,_),f(t,n),E(a,n,null),f(n,o),f(n,r),v[i].m(r,null),m=!0},p(l,[_]){const D={};_&1&&(D.currentPath=l[0]),_&4&&(D.gameType=l[2]),a.$set(D);let F=i;i=C(l),i===F?v[i].p(l,_):(I(),T(v[F],1,1,()=>{v[F]=null}),M(),s=v[i],s?s.p(l,_):(s=v[i]=u[i](l),s.c()),b(s,1),s.m(r,null)),(!m||_&4&&c!==(c=l[2]+" Game"))&&p(t,"aria-label",c)},i(l){m||(b(a.$$.fragment,l),b(s),m=!0)},o(l){T(a.$$.fragment,l),T(s),m=!1},d(l){l&&P(t),G(a),v[i].d()}}}function ae(e,t,n){let a,o,r;Q(e,U,u=>n(5,r=u));const i=B();let{currentPath:s="/"}=t,c=null;function m(u){i("answer",u.detail)}return J(()=>{j.initResponsive(),S.initTheme(),Y.setGameType(a)}),e.$$set=u=>{"currentPath"in u&&n(0,s=u.currentPath)},e.$$.update=()=>{e.$$.dirty&32&&n(0,s=r),e.$$.dirty&1&&n(2,a=s.startsWith("/arithmetic")?"arithmetic":"calculus"),e.$$.dirty&1&&n(3,o=s.includes("/learning")),e.$$.dirty&6&&(a==="arithmetic"&&!c?W(()=>import("./Trainer-BSIbcwzm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url).then(u=>{n(1,c=u.default)}).catch(u=>console.error("Failed to load arithmetic trainer:",u)):a==="calculus"&&!c&&W(()=>import("./Trainer-D3wPrIOK.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]),import.meta.url).then(u=>{n(1,c=u.default)}).catch(u=>console.error("Failed to load calculus trainer:",u)))},[s,c,a,o,m,r]}class oe extends N{constructor(t){super(),O(this,t,ae,ie,V,{currentPath:0})}}export{oe as default};
